@using BarnamenevisanCompany.Application.Extensions
@using BarnamenevisanCompany.Application.Statics
@model BarnamenevisanCompany.Domain.ViewModels.Client.User.ClientUpdateUserAvatarViewModel

<form asp-area="UserPanel"
      asp-controller="User"
      asp-action="UpdateAvatar"
      asp-ajax="true"
      asp-ajax-method="Post"
      asp-ajax-success="successUpdateAvatar(data);"
      asp-ajax-upload="true"
      id="UpdateAvatarForm">
    <input asp-for="Avatar" type="file" class="hidden" ImageInput="1"/>
    <div class="size-28 rounded-full border border-dashed border-gray-100 dark:border-borderColour-dark p-1">
        <div class="relative w-full h-full rounded-full">
            <img class="object-cover w-full h-full rounded-full" id="AvatarImage"
                 src="@FilePaths.UserOriginalAvatar@(!Model.AvatarImageName.IsNullOrEmptyOrWhiteSpace() ? Model.AvatarImageName : SiteTools.DefaultImageName)" alt="profile-piture">
            <div id="avatar-actions" class="rounded-full absolute top-0 bottom-0 right-0 left-0 h-full w-full bg-[rgb(0,0,0,0.6)] flex justify-center items-center opacity-0 transition-all hover:opacity-100 space-x-2 space-x-reverse">
                <a href="javascript:void(0)" ImageButton="1" class="*:text-yellow-400 flex">
                    <iconify-icon icon="tabler:edit" width="24" height="24"></iconify-icon>
                </a>
                @if (!string.IsNullOrWhiteSpace(Model.AvatarImageName))
                {
                    <a class="*:text-red-400 flex"
                       asp-area="UserPanel"
                       asp-controller="User"
                       asp-action="DeleteAvatar"
                       asp-ajax="true"
                       asp-ajax-success="successDeleteAvatar(data);"
                       asp-ajax-reinitialize="false"
                       asp-ajax-confirmable="true"
                       asp-ajax-confirmable-title="حذف تصویر پروفایل"
                       asp-ajax-confirmable-message="آیا از حذف تصویر پروفایل خود مطمئن هستید ؟"
                       id="delete-avatar">
                        <iconify-icon icon="tabler:trash" width="24" height="24"></iconify-icon>
                    </a>
                }
            </div>
        </div>
    </div>
</form>

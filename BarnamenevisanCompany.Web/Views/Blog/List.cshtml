@using BarnamenevisanCompany.Application.Extensions
@using BarnamenevisanCompany.Application.Statics
@using BarnamenevisanCompany.Web.Helpers.TagHelpers
@model BarnamenevisanCompany.Domain.ViewModels.Client.Blog.ClientFilterBlogViewModel

@{
  ViewData["Title"] = "مقالات";
}

@section Breadcrumb{
  <breadcrumb page-title="لیست مقالات">
  </breadcrumb>
}



@if (!Model.Entities.Any() && !Model.HasFilters())
{
  <partial name="_EmptyContentPartial"/>
}
else
{
  <section dir="rtl" class="mb-24 lg:mb-40 relative">
    <div class="container relative">
      <div class="absolute left-1/2 top-20 -translate-x-1/2 -translate-y-1/2 flex max-md:flex-col -z-10 max-md:hidden">
        <div
          class="max-1xl:w-[335px] max-1xl:h-[335px]  1xl:w-[442px] 1xl:h-[442px] bg-primary-200/20 blur-[145px]"></div>
        <div
          class="max-1xl:w-[335px] max-1xl:h-[335px]  1xl:w-[442px] 1xl:h-[442px] bg-primary-200/20 max-md:ml-0 blur-[145px]"></div>
      </div>
      <div class="grid grid-cols-12 max-md:gap-y-25 md:gap-5 lg:gap-8">
        <div
          class="max-md:col-span-full max-lg:col-span-7 max-md:order-2 lg:col-span-8 [&amp;>*:not(:last-child)]:mb-8">
          @if (Model.Entities.Any())
          {
            @foreach (var item in Model.Entities)
            {
              <article
                class="bg-white dark:bg-dark-200 rounded-medium p-2.5 shadow-nav scale-100 hover:scale-105 transition-transform duration-500 hover:transition-transform hover:duration-500">
                <div class="border border-dashed rounded border-gray-100 dark:border-borderColour-dark p-6 max-md:p-4">
                  <div class="grid grid-cols-2 max-lg:grid-cols-1 gap-12 items-center">
                    <a asp-area="" asp-controller="Blog" asp-action="ShortLink" asp-route-id="@item.Id" target="_blank">
                      <img src="@(FilePaths.BlogThumbImage + item.ImageUrl)" alt="@item.Title"
                           class="w-full rounded-lg h-64 object-cover">
                    </a>
                    <div>
                      <a asp-area="" asp-controller="Blog" asp-action="ShortLink" asp-route-id="@item.Id"
                         target="_blank" class="min-h-16 line-clamp-2">
                        <h3 class="mb-1 font-semibold leading-[1.33]">
                          @item.Title
                        </h3>
                      </a>
                      <div class="mt-2 flex gap-x-2 items-center mb-2">
                        <p>@item.Author</p>
                        <span>
                          <svg xmlns="http://www.w3.org/2000/svg" width="5" height="6" viewBox="0 0 5 6" fill="none">
                            <circle cx="2.5" cy="3" r="2.5" fill="" class="fill-[#D8DBD0] dark:fill-[#3B3C39]"></circle>
                          </svg>
                        </span>
                        <p>@item.CreatedDate.ToShamsi() </p>
                        @if (item.VisitCount > 0)
                        {
                          <span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="5" height="6" viewBox="0 0 5 6" fill="none">
                              <circle cx="2.5" cy="3" r="2.5" fill=""
                                      class="fill-[#D8DBD0] dark:fill-[#3B3C39]"></circle>
                            </svg>
                          </span>
                          <p>@item.VisitCount بازدید</p>
                        }
                      </div>
                      <div class="mb-4 min-h-28 line-clamp-4">
                        @Html.Raw(item.ShortDescription)
                      </div>
                      <a asp-area="" asp-controller="Blog" asp-action="ShortLink" asp-route-id="@item.Id"
                         target="_blank"
                         class="btn-outline btn-sm">
                        ادامه مطلب
                      </a>
                    </div>
                  </div>
                </div>
              </article>
            }
          }
          else
          {
            <article
              class="bg-white dark:bg-dark-200 rounded-medium p-2.5 shadow-nav scale-100 transition-transform duration-500">
              <div class="border border-dashed rounded border-gray-100 dark:border-borderColour-dark p-6 max-md:p-4">
                <div class="text-center max-w-[475px] mx-auto flex flex-col items-center justify-center gap-4">
                  <div class="w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-primary" viewBox="0 0 24 24"
                         fill="none">
                      <path d="M21 21L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round"/>
                      <circle cx="10" cy="10" r="7" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                              stroke-linejoin="round"/>
                    </svg>
                  </div>
                  <h3 class="text-lg font-semibold text-gray-700 dark:text-white">محتوایی جهت نمایش وجود ندارد!</h3>
                  <p class="text-paragraph text-sm dark:text-paragraph-light">لطفاً فیلترهای جستجو را بررسی کرده و یا
                    جستجوی دیگری انجام دهید.</p>
                </div>
              </div>
            </article>
          }
          <div class="mt-16">
            <partial name="~/Views/Shared/_PagingPartial.cshtml" model="@Model.GetCurrentPaging()"/>
          </div>
        </div>
        <div class="max-md:col-span-full max-lg:col-span-5 max-md:order-1 lg:col-span-4 self-start ">
          <div class=" bg-white dark:bg-dark-200 rounded-medium p-2.5  shadow-nav">
            <div
              class="bg-white dark:bg-dark-200 border border-dashed rounded border-gray-100 dark:border-borderColour-dark py-12 px-8">
              <div class="mb-12">
                <form asp-area=""
                      asp-controller="Blog"
                      asp-action="List"
                      method="get"
                      id="filter-search">
                  <input asp-for="@Model.Page" type="hidden"/>
                  <h3 class="mb-8">جست و جو</h3>
                  <label class="relative block">
                    <span class="sr-only">جست و جو</span>
                    <button class="absolute inset-y-0 left-0 flex items-center pl-5" type="submit">
                      <span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                          <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M9.11278 0C14.1369 0 18.2245 4.08758 18.2245 9.11278C18.2245 11.2861 17.4592 13.5472 16.1845 14.8512L20 18.6667L18.6667 20L14.8512 16.1856C13.5667 17.4603 11.2861 18.2245 9.11278 18.2245C4.08758 18.2245 0 14.1369 0 9.11278C0 4.08758 4.08758 0 9.11278 0ZM9.11278 16.3395C13.0974 16.3395 16.3395 13.0974 16.3395 9.11278C16.3395 5.12818 13.0974 1.88608 9.11278 1.88608C5.12709 1.88608 1.88499 5.12818 1.88499 9.11278C1.88499 13.0974 5.12709 16.3395 9.11278 16.3395Z"
                                fill="" class="fill-paragraph dark:fill-white"></path>
                        </svg>
                      </span></button>
                    <input
                      class="w-full border dark:bg-transparent border-borderColour dark:border-borderColour-dark rounded-[60px] py-5 pl-12 pr-12 focus:outline-none placeholder:text-paragraph-light dark:text-paragraph-light focus:border-primary dark:focus:border-primary duration-300 transition-all "
                      placeholder="عنوان مقاله" autocomplete="off" asp-for="Title">

                    @if (Model.HasFilters())
                    {
                      <a asp-area=""
                         asp-controller="Blog"
                         asp-action="List"
                         type="button"
                         class="absolute right-5 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-red-500 focus:outline-none transition-colors duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                          <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M10 0C4.47715 0 0 4.47715 0 10C0 15.5228 4.47715 20 10 20C15.5228 20 20 15.5228 20 10C20 4.47715 15.5228 0 10 0ZM14.7071 5.29289C15.0976 5.68342 15.0976 6.31658 14.7071 6.70711L11.4142 10L14.7071 13.2929C15.0976 13.6834 15.0976 14.3166 14.7071 14.7071C14.3166 15.0976 13.6834 15.0976 13.2929 14.7071L10 11.4142L6.70711 14.7071C6.31658 15.0976 5.68342 15.0976 5.29289 14.7071C4.90237 14.3166 4.90237 13.6834 5.29289 13.2929L8.58579 10L5.29289 6.70711C4.90237 6.31658 4.90237 5.68342 5.29289 5.29289C5.68342 4.90237 6.31658 4.90237 6.70711 5.29289L10 8.58579L13.2929 5.29289C13.6834 4.90237 14.3166 4.90237 14.7071 5.29289Z"
                                fill="currentColor" class="fill-paragraph dark:fill-white"></path>
                        </svg>
                      </a>
                    }
                  </label>
                </form>
              </div>
              <div class="mb-4">
                <h3 class="mb-8"> آخرین مقالات </h3>
                <div class="[&amp;>*:not(:last-child)]:mb-6">
                  @await Component.InvokeAsync("RecentBlogs")
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <partial name="_BacklightPartial"/>
}

